CREATE TABLE guild (
  id INTEGER PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY,
  name VARCHAR(255) UNIQUE NOT NULL,
  master_id INTEGER DEFAULT NULL,
  officer_id INTEGER DEFAULT NULL
);

CREATE TABLE game_character (
  id INTEGER PRIMARY KEY NOT NULL GENERATED BY DEFAULT AS IDENTITY,
  name VARCHAR(255) UNIQUE NOT NULL,
  level INTEGER DEFAULT NULL,
  guild_id INTEGER DEFAULT NULL FOREIGN KEY REFERENCES guild(id)
);

ALTER TABLE guild ADD FOREIGN KEY (master_id) REFERENCES game_character(id);
ALTER TABLE guild ADD FOREIGN KEY (officer_id) REFERENCES game_character(id);